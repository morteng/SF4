# Todo
1. Fix tests
2. Update this list with new actionable items

### **Next Steps**
1. **Add Missing Constants**:
   - [x] Add `EMAIL_REQUIRED` to `app/constants.py`.
2. **Fix Rate Limiter Configuration**:
   - [x] Update `@Limiter.limit` decorator in `app/services/base_service.py`.
3. **Refactor Imports**:
   - [x] Use lazy imports in `app/__init__.py` to avoid circular dependencies.

### **Things to Remember for Next Coding Session**
1. **Error Handling**:
   - Always include proper error handling for `try` blocks to avoid syntax errors.
   - Log errors with context to facilitate debugging.

2. **Constants Management**:
   - Use `app/constants.py` for all error messages and validation strings.
   - Verify that all required constants are defined and imported correctly.
   - Add missing constants as soon as they are identified to avoid runtime errors.

3. **Dependency Management**:
   - Always check compatibility between library versions, especially for critical dependencies like `Flask-Login` and `Werkzeug`.
   - Update `requirements.txt` to reflect the correct versions.

4. **Testing**:
   - Run tests after making changes to dependencies, constants, or validation logic.
   - Use `pytest` for comprehensive testing, including edge cases for date/time validation.
   - Ensure all test dependencies are installed before running tests.

5. **Code Organization**:
   - Keep validation logic modular and reusable.
   - Avoid hardcoding strings; use constants instead.
   - Ensure properties are defined correctly with `@property` and `@<property>.setter`.

6. **Rate Limiting**:
   - Ensure rate limiters are properly configured with valid string values (e.g., "10 per minute").
   - Validate rate limit values in setters to prevent invalid configurations.

### **Lessons Learned**
1. **Proper Error Handling**:
   - Always include `except` or `finally` blocks for `try` statements to avoid syntax errors.

2. **Centralized Constants**:
   - Keeping all error messages and validation strings in `app/constants.py` ensures consistency and reduces the chance of typos.
   - Missing constants can cause runtime errors, so add them as soon as they are identified.

3. **Dependency Verification**:
   - Verify dependencies before running tests to avoid installation issues.

4. **Testing Edge Cases**:
   - Pay special attention to edge cases for date/time validation, such as leap years and invalid time components.

5. **Property Implementation**:
   - Always define properties with `@property` before using `@<property>.setter`.
   - Validate property values in setters to maintain data integrity.

6. **Rate Limiting**:
   - Ensure rate limiters are properly configured and validated to prevent runtime errors.

### **Recent Changes**
1. **Added Missing Constants**:
   - Added `MISSING_FIELD_ERROR`, `USERNAME_REQUIRED`, `USERNAME_LENGTH`, `USERNAME_FORMAT`, and `EMAIL_REQUIRED` to `app/constants.py`.

2. **Refactored Validation Logic**:
   - Moved reusable validation logic (e.g., `validate_application_deadline`) to `app/common/utils.py`.

3. **Improved Tests**:
   - Added edge case tests in `tests/test_base_crud_controller.py` for invalid form submissions and missing fields.

4. **Updated `requirements.txt`**:
   - Added `beautifulsoup4` for HTML parsing in tests.

5. **Fixed Property Implementation**:
   - Consolidated the `create_limit` property in `app/services/base_service.py` to avoid conflicts and ensure proper validation.

6. **Rate Limiter Configuration**:
   - Added validation for rate limit values in `app/services/base_service.py` to ensure they are valid strings.


