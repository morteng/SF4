# Enhanced Test Coverage Cycle
# REMEMBER: All /code, /architect and /ask prompts must be on single line only, no linebreaks!

# 1. Analyze current test coverage
/run scripts/analyze_test_coverage.py

# 2. Identify critical paths needing coverage 
/ask Based on the coverage report, what are the most critical paths that need test coverage? Focus on: - Core business logic in services - Database operations - Form validation - Route handlers - Error handling - Edge cases - HTMX functionality

# 3. Consolidate duplicate test files
/code Consolidate tests/app/routes/test_stipend_routes.py and tests/app/routes/admin/test_stipend_routes.py into a single comprehensive test file in tests/app/routes/admin/test_stipend_routes.py

# 4. Enhance existing tests
/code Update tests/app/services/test_stipend_service.py to add more edge case and error condition tests

# 5. Add comprehensive test cases
/code Add test cases for: - Invalid form submissions - Missing required fields - Database constraint violations - HTMX partial responses - Error conditions - Edge cases

# 6. Verify coverage meets target
/run scripts/verify_test_coverage.py

# 7. Update documentation
/code Update DEVLOG.md with test coverage results
/code Update TODO.txt to mark test coverage tasks complete

# 8. Transition to finalization
/load meta_cycles/finalize_cycle.aiderscript
