# Console Commands for Step 1 (Analyzing)
# Do not use echo
# Only edit the section of this document between CODE START and CODE END

### CODE START ###

# Clean environment setup
/run set DB_PATH=./ && set SQLALCHEMY_DATABASE_URI=sqlite:///${DB_PATH}/instance/stipend.db
/run del instance\\stipend.db

# Apply fresh migrations with SQLite fixes
/run alembic downgrade base
/run alembic upgrade head

# Verify final state
/run python scripts/verification/verify_db_schema.py --full
/run python scripts/verification/verify_production_ready.py --full

### CODE END ###

# Console commands done, we go on to 03_STEP_2.txt
/load automation/03_STEP_2.txt
